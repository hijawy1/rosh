function isActive(e){return e.hasClass("active")}function erase_text(){cssApplier1=rangy.createCssClassApplier("rr_highlight",{normalize:!0}),cssApplier2=rangy.createCssClassApplier("rr_strikeout",{normalize:!0}),element=$("#erase"),isActive(element)?element.removeClass("active"):(element.addClass("active"),$("#highlight").removeClass("active"),$("#strikeout").removeClass("active"))}function highlight_text(){cssApplier1=rangy.createCssClassApplier("rr_highlight",{normalize:!0}),element=$("#highlight"),isActive(element)?element.removeClass("active"):(element.addClass("active"),$("#strikeout").removeClass("active"),$("#erase").removeClass("active"))}function strikeout_text(){cssApplier2=rangy.createCssClassApplier("rr_strikeout",{normalize:!0}),element=$("#strikeout"),isActive(element)?element.removeClass("active"):(element.addClass("active"),$("#highlight").removeClass("active"),$("#erase").removeClass("active"))}function clear_selection(){window.getSelection?window.getSelection().removeAllRanges():document.selection&&document.selection.empty()}function initialize_highlight(){$(document).delegate(".highlightable","mousedown",function(){$(this).on("mouseup",function(e){(targetElement="undefined"!=typeof e.target?$(e.target):$(e.srcElement),0==targetElement.closest(".mejs-container").length)&&(rangy.getSelection().toHtml().toLowerCase().match(/<div[^>]* class=[',"]?highlightable[',"]?|<div class=[',"]mejs-/)||(isActive($("#highlight"))?(cssApplier1.applyToSelection(),clear_selection()):isActive($("#strikeout"))?(cssApplier2.applyToSelection(),clear_selection()):isActive($("#erase"))&&(cssApplier1.undoToSelection(),cssApplier2.undoToSelection(),clear_selection())),"question_description"==$(this).attr("id")?Question.changed_question_description_highlight=!0:"question_explanation"==$(this).attr("id")?Question.changed_question_explanation_highlight=!0:Question.changed_answer_options_highlights.push($(this).closest("li").index()))})})}function define_index_of_function(){Array.prototype.indexOf||(Array.prototype.indexOf=function(e){var t=this.length>>>0,i=Number(arguments[1])||0;for((i=i<0?Math.ceil(i):Math.floor(i))<0&&(i+=t);i<t;i++)if(i in this&&this[i]===e)return i;return-1})}$(function(){define_index_of_function(),rangy.init(),initialize_highlight()});